namespace = afariqa

# Ifriqan influenced courts at game start
afariqa.0001 = {
	hidden = yes

	immediate = {
		hidden_effect = {
			# Afariqa female
			create_character = {
				#location = root.location
				gender = female
				faith = faith:ibadi
				culture = culture:african_roman
				random_traits = yes
				employer = root
				save_scope_as = spawned_afariqa_courtier_1
			}
			scope:spawned_afariqa_courtier_1 = {
				learn_language = language_arabic
			}
			# Afariqa male
			create_character = {
				#location = root.location
				gender = male
				faith = faith:ibadi
				culture = culture:african_roman
				random_traits = yes
				employer = root
				save_scope_as = spawned_afariqa_courtier_2
			}
			scope:spawned_afariqa_courtier_2 = {
				learn_language = language_arabic
			}
			# Afariqa male
			create_character = {
				#location = root.location
				gender = male
				faith = faith:catholic
				culture = culture:african_roman
				random_traits = yes
				employer = root
				save_scope_as = spawned_afariqa_courtier_3
			}
			scope:spawned_afariqa_courtier_3 = {
				learn_language = language_berber
			}
			# Afariqa male
			create_character = {
				#location = root.location
				gender = male
				faith = faith:catholic
				culture = culture:african_roman
				random_traits = yes
				employer = root
				save_scope_as = spawned_afariqa_courtier_4
			}
			scope:spawned_afariqa_courtier_4 = {
				learn_language = language_berber
			}
			# Afariqa female
			create_character = {
				#location = root.location
				gender = female
				faith = faith:catholic
				culture = culture:african_roman
				random_traits = yes
				employer = root
				save_scope_as = spawned_afariqa_courtier_5
			}
			scope:spawned_afariqa_courtier_5 = {
				learn_language = language_berber
			}
			# Misc
			random_list = {
				10 = {
					create_character = {
						#location = root.location
						gender = male
						faith = faith:catholic
						culture = culture:african_roman
						random_traits = yes
						employer = root
					}
				}
				10 = {
					create_character = {
						#location = root.location
						gender = male
						faith = faith:ibadi
						culture = culture:african_roman
						random_traits = yes
						employer = root
					}
				}
				10 = {
					create_character = {
						#location = root.location
						gender = female
						faith = root.faith
						culture = culture:african_roman
						random_traits = yes
						employer = root
						after_creation = {
							random_list = {
								10 = { }
								10 = { set_character_faith = faith:ibadi }
								10 = { set_character_faith = faith:ashari }
							}
						}
					}
				}
				10 = {
					create_character = {
						#location = root.location
						gender = female
						faith = faith:catholic
						culture = culture:african_roman
						random_traits = yes
						employer = root
					}
				}
			}
		}	
	}	
}

######################################################################################
# 
# COURTIER SPAWN EVENTS
# 
# 
######################################################################################
# Merchant offers services 
afariqa.0013 = {
	type = character_event
	title = afariqa.0013.t
	desc = afariqa.0013.desc

	theme = stewardship_wealth_focus
	override_background = { event_background = throne_room }
	
	
	left_portrait = {
		character = scope:scope_BAP_afariqa_merchant_spawn
		animation = steward
	}
	
	trigger = {
		capital_province = { geographical_region = custom_afariqa }
	}
	
	weight_multiplier = {
		base = 1
		modifier = {
			add = -0.2
			has_character_flag = BAP_afariqa_already_spawned_merchant
		}
		modifier = {
			add = -0.2
			AND = {
				is_ruler = yes
				has_government = tribal_government
			}
		}
	}

	immediate = {
		capital_province = { save_scope_as = capital_province } #For loc.
		add_character_flag = BAP_afariqa_already_spawned_merchant
		random_list = {

			20 = {
				create_character = {
					location = root.location
					template = afariqa_merchant_template
					save_scope_as = scope_BAP_afariqa_merchant_spawn
					culture = culture:african_roman
					faith = faith:catholic
				}				
			}
			10 = {
				create_character = {
					location = root.location
					template = afariqa_merchant_template
					save_scope_as = scope_BAP_afariqa_merchant_spawn
					culture = culture:african_roman
					faith = faith:ashari
				}				
			}
			20 = {
				create_character = {
					location = root.location
					template = afariqa_merchant_template
					save_scope_as = scope_BAP_afariqa_merchant_spawn
					culture = culture:african_roman
					faith = faith:ibadi
				}				
			}
		}
		hidden_effect = {
			scope:scope_BAP_afariqa_merchant_spawn = {
				add_character_modifier = {
					modifier = BAP_afariqa_merchant_modifier
				}
			}
		}
	}

	# Okay
	option = {
		name = afariqa.0013.a
		pay_short_term_gold = {
			target = scope:scope_BAP_afariqa_merchant_spawn
			gold = minor_gold_value #minor_gold_value
		}
		add_courtier = scope:scope_BAP_afariqa_merchant_spawn
		hidden_effect = {
			random = {
				chance = 50
				BAP_generate_small_family = { CHARACTER = scope:scope_BAP_afariqa_merchant_spawn }
			}
		}
	}

	# Not interested
	option = {
		name = afariqa.0013.b
		hidden_effect = {
			random = {
				chance = 66
				scope:scope_BAP_afariqa_merchant_spawn = {
					death = {
						death_reason = death_disappearance
					}
				}
			}
		}
	}
}


# Diplomat offers services 
afariqa.0014 = {
	type = character_event
	title = afariqa.0014.t
	desc = afariqa.0014.desc

	theme = stewardship_wealth_focus
	override_background = { event_background = throne_room }
	
	
	left_portrait = {
		character = scope:scope_BAP_afariqa_diplomat_spawn
		animation = chancellor
	}
	
	trigger = {
		capital_province = { geographical_region = custom_afariqa }
	}
	
	weight_multiplier = {
		base = 1
		modifier = {
			add = -0.2
			has_character_flag = BAP_afariqa_already_spawned_diplomat
		}
		modifier = {
			add = -0.2
			AND = {
				is_ruler = yes
				has_government = tribal_government
			}
		}
	}

	immediate = {
		capital_province = { save_scope_as = capital_province } #For loc.
		add_character_flag = BAP_afariqa_already_spawned_diplomat
		random_list = {
			
			20 = {
				create_character = {
					location = root.location
					template = afariqa_diplomat_template
					save_scope_as = scope_BAP_afariqa_diplomat_spawn
					culture = culture:african_roman
					faith = faith:catholic
				}				
			}
			10 = {
				create_character = {
					location = root.location
					template = afariqa_diplomat_template
					save_scope_as = scope_BAP_afariqa_diplomat_spawn
					culture = culture:african_roman
					faith = faith:ashari
				}				
			}
			20 = {
				create_character = {
					location = root.location
					template = afariqa_diplomat_template
					save_scope_as = scope_BAP_afariqa_diplomat_spawn
					culture = culture:african_roman
					faith = faith:ibadi
				}				
			}
		}
		hidden_effect = {
			scope:scope_BAP_afariqa_diplomat_spawn = {
				add_character_modifier = {
					modifier = BAP_afariqa_diplomat_modifier
				}
			}
		}
	}

	# Okay
	option = {
		name = afariqa.0014.a
		pay_short_term_gold = {
			target = scope:scope_BAP_afariqa_diplomat_spawn
			gold = minor_gold_value #minor_gold_value
		}
		add_courtier = scope:scope_BAP_afariqa_diplomat_spawn
		hidden_effect = {
			random = {
				chance = 50
				BAP_generate_small_family = { CHARACTER = scope:scope_BAP_afariqa_diplomat_spawn }
			}
		}
	}

	# Not interested
	option = {
		name = afariqa.0014.b
		hidden_effect = {
			random = {
				chance = 66
				scope:scope_BAP_afariqa_diplomat_spawn = {
					death = {
						death_reason = death_disappearance
					}
				}
			}
		}
	}
	
}


# Adventurer offers services 
afariqa.0015 = {
	type = character_event
	title = afariqa.0015.t
	desc = afariqa.0015.desc
	theme = stewardship_wealth_focus
	override_background = { event_background = throne_room }
	
	
	left_portrait = scope:scope_BAP_afariqa_traveler_spawn
	
	trigger = {
		capital_province = { geographical_region = custom_afariqa }
	}
	
	weight_multiplier = {
		base = 1
		modifier = {
			add = -0.2
			has_character_flag = BAP_afariqa_already_spawned_adventurer
		}
		modifier = {
			add = -0.2
			AND = {
				is_ruler = yes
				has_government = tribal_government
			}
		}
	}

	immediate = {
		capital_province = { save_scope_as = capital_province } #For loc.
		add_character_flag = BAP_afariqa_already_spawned_adventurer
		random_list = {
			20 = {
				create_character = {
					location = root.location
					template = afariqa_adventurer_template
					save_scope_as = scope_BAP_afariqa_traveler_spawn
					culture = culture:african_roman
					faith = faith:catholic
				}				
			}
			10 = {
				create_character = {
					location = root.location
					template = afariqa_adventurer_template
					save_scope_as = scope_BAP_afariqa_traveler_spawn
					culture = culture:african_roman
					faith = faith:ashari
				}				
			}
			20 = {
				create_character = {
					location = root.location
					template = afariqa_adventurer_template
					save_scope_as = scope_BAP_afariqa_traveler_spawn
					culture = culture:african_roman
					faith = faith:ibadi
				}				
			}
		}
		hidden_effect = {
			scope:scope_BAP_afariqa_traveler_spawn = {
				add_character_modifier = {
					modifier = BAP_afariqa_adventurer_modifier
				}
			}
		}
	}

	# Okay
	option = {
		name = afariqa.0015.a
		pay_short_term_gold = {
			target = scope:scope_BAP_afariqa_traveler_spawn
			gold = minor_gold_value #minor_gold_value
		}
		add_courtier = scope:scope_BAP_afariqa_traveler_spawn
		hidden_effect = {
			random = {
				chance = 50
				BAP_generate_small_family = { CHARACTER = scope:scope_BAP_afariqa_traveler_spawn }
			}
		}
	}

	# Not interested
	option = {
		name = afariqa.0015.b
		hidden_effect = {
			random = {
				chance = 66
				scope:scope_BAP_afariqa_traveler_spawn = {
					death = {
						death_reason = death_disappearance
					}
				}
			}
		}
	}
}
